<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI –ü—Å–∏—Ö–æ–ª–æ–≥</title>
    
    <!-- –°–∫—Ä–∏–ø—Ç Telegram -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- –®—Ä–∏—Ñ—Ç—ã –∏ –∏–∫–æ–Ω–∫–∏ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&subset=cyrillic&display=swap" rel="stylesheet">
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å—Ç–∏–ª–µ–π -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- –ö–æ–Ω—Å–æ–ª—å –æ—à–∏–±–æ–∫ (—Å–∫—Ä—ã—Ç–∞) -->
    <div id="error-console" style="position:fixed; top:0; left:0; width:100%; padding:20px; background:rgba(255,0,0,0.9); color:white; z-index:9999; display:none; font-family:monospace; font-size:12px;"></div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã -->
    <div id="paywall-modal" class="paywall-modal">
        <div class="pay-card" style="max-width: 360px;">
            <span class="material-icons-round pay-icon">local_fire_department</span>
            <div class="pay-title">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é</div>
            <div class="pay-desc" id="paywall-reason-text">–ó–∞–ø—Ä–æ—Å—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –ö—É–ø–∏—Ç–µ –ø–∞–∫–µ—Ç, –æ–Ω –Ω–µ —Å–≥–æ—Ä–∞–µ—Ç —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.</div>
            
            <div class="plan-btn" onclick="buySubscription('small')">
                <div style="text-align:left; flex:1;">
                    <div class="plan-name">–°—Ç–∞—Ä—Ç</div>
                    <div class="plan-sub">50 –∑–∞–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="plan-price">99 ‚≠ê</div>
            </div>

            <div class="plan-btn popular" onclick="buySubscription('medium')">
                <div class="save-badge">–•–ò–¢</div>
                <div style="text-align:left; flex:1;">
                    <div class="plan-name">–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π</div>
                    <div class="plan-sub">300 –∑–∞–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="plan-price">399 ‚≠ê</div>
            </div>

            <div class="plan-btn" onclick="buySubscription('large')" style="border-color: #FFD700;">
                <div style="text-align:left; flex:1;">
                    <div class="plan-name">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π</div>
                    <div class="plan-sub">1000 –∑–∞–ø—Ä–æ—Å–æ–≤</div>
                </div>
                <div class="plan-price">999 ‚≠ê</div>
            </div>

            <button onclick="closePaywall()" style="background:transparent; border:none; color:#777; margin-top:10px; font-size:14px; text-decoration:underline; cursor:pointer;">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- –í–µ—Ä—Ö–Ω—è—è —à–∞–ø–∫–∞ (Header) -->
    <header id="main-header">
        <button id="back-btn" onclick="goBack()">
            <span class="material-icons-round">arrow_back</span>
        </button>
        <span class="header-title" id="page-title">–ù–∞–∑–∞–¥</span>
    </header>

    <!-- GPU Activator (–¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –∞–Ω–∏–º–∞—Ü–∏–π) -->
    <div id="gpu-activator"></div>

    <!-- –≠–ö–†–ê–ù 1: –ú–ï–ù–Æ -->
    <div id="menu-screen" class="screen active">
        <div class="greeting-header">
            <div class="greeting-text">
                <h1><span id="greetingText">–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ</span>,<br><span id="userNameDisplay">User</span></h1>
                <p>–ß—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç –≤–∞—Å —Å–µ–≥–æ–¥–Ω—è?</p>
            </div>
            <button class="sos-btn-header" onclick="navigateTo('sos')">SOS</button>
        </div>
        
        <div class="main-grid">
            <div class="action-card card-chat" onclick="navigateTo('chat')">
                <div class="icon-box"><span class="material-icons-round">chat_bubble_outline</span></div>
                <h3>–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
            </div>
            <div class="action-card card-breath" onclick="navigateTo('game')">
                <div class="icon-box"><span class="material-icons-round">air</span></div>
                <h3>–î—ã—Ö–∞–Ω–∏–µ</h3>
            </div>
        </div>
        
        <div class="widget-card" onclick="navigateTo('video')">
            <div class="widget-header">
                <div class="dot-indicator"></div>
                <div style="font-size:14px;color:var(--text-muted)">–ú–µ–¥–∏—Ç–∞—Ü–∏–∏</div>
            </div>
            <div style="font-size:18px;font-weight:600;color:var(--text-header)">–°–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ</div>
            <div class="wave-container">
                <svg class="wave-graph" viewBox="0 0 600 50" preserveAspectRatio="none">
                    <defs>
                        <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" class="wave-fill" style="stop-opacity:0.6"/>
                            <stop offset="100%" class="wave-fill" style="stop-opacity:0"/>
                        </linearGradient>
                    </defs>
                    <path d="M0,25 Q75,5 150,25 T300,25 T450,25 T600,25 V50 H0 Z" fill="url(#grad1)"/>
                    <path d="M0,25 Q75,5 150,25 T300,25 T450,25 T600,25" class="wave-stroke" stroke-width="2" fill="none"/>
                </svg>
            </div>
        </div>

        <div class="bottom-grid">
            <div class="small-card" onclick="navigateTo('music')">
                <div class="small-icon warm-icon">
                    <span id="diary-icon" class="material-icons-round">favorite_border</span>
                </div>
                <div><h4>–î–Ω–µ–≤–Ω–∏–∫</h4><span>–°–æ—Å—Ç–æ—è–Ω–∏–µ</span></div>
            </div>
            <div class="small-card" onclick="navigateTo('balloons')">
                <div class="small-icon mint-icon">
                    <span class="material-icons-round">sports_esports</span>
                </div>
                <div><h4>–ò–≥—Ä–∞</h4><span>–®–∞—Ä–∏–∫–∏</span></div>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 2: –ß–ê–¢ -->
    <div id="chat-screen" class="screen">
        <div id="chat-container">
            <div class="message msg-bot msg-enter">–Ø —Ä—è–¥–æ–º. –í—ã –º–æ–∂–µ—Ç–µ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –º–Ω–µ –≤—Å–µ, —á—Ç–æ –≤–∞—Å —Ç—Ä–µ–≤–æ–∂–∏—Ç. üåø</div>
            <div class="typing-indicator" id="typing">
                <div class="dot"></div><div class="dot"></div><div class="dot"></div>
            </div>
        </div>
        <div class="input-area">
            <button id="micBtn" class="btn-sq"><span class="material-icons-round">mic</span></button>
            <input type="text" id="userInput" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ...">
            <button id="sendBtn" class="btn-sq"><span class="material-icons-round">arrow_upward</span></button>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 3: SOS (–ó–∞–∑–µ–º–ª–µ–Ω–∏–µ) -->
    <div id="sos-screen" class="screen">
        <div class="sos-container-3d">
            <div id="sos-content-area" class="sos-title-block"></div>
            <div id="sos-desc-area" style="text-align:center; margin-bottom:40px; min-height:30px;"></div>
            <button id="sos-main-btn" class="sos-btn-3d" onclick="nextSos()"><span>–ì–æ—Ç–æ–≤–æ</span></button>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 4: –í–ò–î–ï–û (–ú–µ–¥–∏—Ç–∞—Ü–∏–∏) -->
    <div id="video-screen" class="screen">
        <div style="padding:24px;">
            <h2>–ü—Ä–∞–∫—Ç–∏–∫–∏</h2>
            <div class="small-card" onclick="alert('–°–∫–æ—Ä–æ!')">
                <div class="small-icon mint-icon"><span class="material-icons-round">self_improvement</span></div>
                <div><h4>–û—Å–æ–∑–Ω–∞–Ω–Ω–æ—Å—Ç—å</h4><span>5 –º–∏–Ω—É—Ç</span></div>
            </div>
        </div>
    </div>
    
    <!-- –≠–ö–†–ê–ù 5: –î–´–•–ê–ù–ò–ï (–ò–≥—Ä–∞) -->
    <div id="game-screen" class="screen">
        <canvas id="breathCanvas"></canvas>
        <div class="game-ui-overlay">
            <div class="breath-text-container">
                <div class="breath-status" id="breathLabel">–î–´–®–ò–ú</div>
                <div class="breath-timer-text" id="breathInstruction">–ù–∞–∂–º–∏ –°—Ç–∞—Ä—Ç</div>
            </div>
            <div class="game-controls">
                <button class="btn-game-card" id="breathStartBtn" onclick="toggleBreathing()">
                    <span class="material-icons-round" id="playIcon">play_arrow</span>
                    <span id="playText">–°—Ç–∞—Ä—Ç</span>
                </button>
                <button class="btn-reset-sq" onclick="resetBreathing()">
                    <span class="material-icons-round">refresh</span>
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 6: –î–ù–ï–í–ù–ò–ö (–ú—É–∑—ã–∫–∞) -->
    <div id="music-screen" class="screen">
        <div style="padding:24px; overflow-y:auto; padding-bottom: 90px;">
            <div class="chart-container">
                <canvas id="pieChart"></canvas>
                <div id="chart-legend" class="pie-legend"></div>
                <div id="empty-chart-msg" style="position:absolute; color:var(--text-muted); font-size:14px; text-align:center; display:none;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö<br>–û—Ç–º–µ—Ç—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</div>
            </div>
            
            <h2 style="margin-bottom:15px; font-size:18px; color:var(--text-header)">–ö–∞–∫ –≤—ã —Å–µ–π—á–∞—Å?</h2>
            <div class="mood-grid">
                <div class="mood-item mood-card-5" onclick="saveMood(5)"><span class="material-icons-round">sentiment_very_satisfied</span><span>–û—Ç–ª–∏—á–Ω–æ</span></div>
                <div class="mood-item mood-card-4" onclick="saveMood(4)"><span class="material-icons-round">sentiment_satisfied_alt</span><span>–•–æ—Ä–æ—à–æ</span></div>
                <div class="mood-item mood-card-3" onclick="saveMood(3)"><span class="material-icons-round">sentiment_neutral</span><span>–ù–æ—Ä–º</span></div>
                <div class="mood-item mood-card-2" onclick="saveMood(2)"><span class="material-icons-round">sentiment_dissatisfied</span><span>–¢–∞–∫ —Å–µ–±–µ</span></div>
                <div class="mood-item mood-card-1" onclick="saveMood(1)"><span class="material-icons-round">sentiment_very_dissatisfied</span><span>–ü–ª–æ—Ö–æ</span></div>
            </div>
            
            <h2 style="margin-bottom:15px; font-size:18px; color:var(--text-header)">–ò—Å—Ç–æ—Ä–∏—è</h2>
            <div id="history-container" class="history-list"></div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 7: –®–ê–†–ò–ö–ò (Balloon Game) -->
    <div id="balloon-game-screen" class="screen">
        <div class="game-ui-header">
            <button id="back-btn-game" onclick="goBack()"><span class="material-icons-round">arrow_back</span></button>
            <div id="game-timer">02:00</div>
            <div class="score-box" id="balloon-score">0</div>
        </div>
        <canvas id="balloon-game-canvas"></canvas>
        
        <div id="game-over-modal" class="game-modal">
            <div id="record-badge" class="new-record-badge" style="display:none">üèÜ –ù–û–í–´–ô –†–ï–ö–û–†–î!</div>
            <span id="game-icon" class="material-icons-round cup-icon" style="display:none">emoji_events</span>
            <div class="score-big" id="final-score">0</div>
            <div class="score-label">–®–∞—Ä–∏–∫–æ–≤</div>
            <div style="width:100%;max-width:280px;display:flex;gap:12px;flex-direction:column;">
                <button class="btn-game-primary" onclick="initBalloonGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                <button class="btn-game-secondary" onclick="goBack()">–í –º–µ–Ω—é</button>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 8: –ó–í–û–ù–û–ö (Call) -->
    <div id="call-screen" class="screen">
        <div class="call-ui-container">
            <div class="call-header">
                <div class="call-status" id="callStatus">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</div>
                <div class="call-name">AI –ü—Å–∏—Ö–æ–ª–æ–≥</div>
            </div>
            <div class="call-visual-area">
                <div class="ai-avatar-circle">
                    <span class="material-icons-round" style="font-size: 64px; color: white;">graphic_eq</span>
                </div>
            </div>
            <div class="call-controls-row">
                <button class="btn-round-control" id="speakerBtn" onclick="toggleSpeaker()"><span class="material-icons-round">volume_up</span></button>
                <button class="btn-round-control" onclick="toggleMicMute(this)"><span class="material-icons-round">mic</span></button>
                <button class="btn-round-end" onclick="endCall()"><span class="material-icons-round">call_end</span></button>
            </div>
        </div>
    </div>

    <!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
    <nav class="bottom-nav">
        <button class="nav-item" onclick="toggleTheme()"><span id="theme-icon" class="material-icons-round nav-icon">dark_mode</span></button>
        <button class="nav-item" onclick="navigateTo('sos')"><span id="sos-nav-icon" class="material-icons-round nav-icon">sos</span></button> 
        <button class="nav-item" onclick="navigateTo('call')"><span id="call-nav-icon" class="material-icons-round nav-icon">call</span></button>
        <button class="nav-item" onclick="navigateTo('chat')"><span id="chat-nav-icon" class="material-icons-round nav-icon">chat_bubble_outline</span></button>    
    </nav>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="script.js"></script>

</body>
</html>
